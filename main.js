(()=>{"use strict";var e=document.querySelector(".popup-photo"),t=e.querySelector(".popup-photo__image"),n=e.querySelector(".popup-photo__title"),o=document.querySelector("#card").content;function r(e,t,n,r){var c=o.querySelector(".cards__list-item").cloneNode(!0),u=c.querySelector(".cards__like-button"),i=c.querySelector(".cards__delete-button"),s=c.querySelector(".cards__image"),a=c.querySelector(".cards__title");return a.textContent=e.name,s.src=e.link,s.alt="Фотография ".concat(a.textContent),u.addEventListener("click",(function(){t(u)})),i.addEventListener("click",(function(){var e=i.closest(".cards__list-item");n(e)})),s.addEventListener("click",(function(){r(e)})),c}function c(e){e.classList.add("popup_opened"),document.addEventListener("keyup",i)}function u(e){e.classList.remove("popup_opened"),document.removeEventListener("keyup",i)}function i(e){"Escape"===e.key&&u(document.querySelector(".popup_opened"))}var s=document.querySelector(".popup_edit"),a=document.querySelector(".popup_place"),l=document.querySelector(".profile__edit-button"),d=s.querySelector(".popup__close-button"),p=document.querySelector("#form_edit"),_=p.querySelector(".form__input_type_name"),m=p.querySelector(".form__input_type_about"),f=document.querySelector(".profile__name"),v=document.querySelector(".profile__caption"),y=document.querySelector(".profile__add-button"),S=a.querySelector(".popup__close-button"),q=document.querySelector("#form_place"),k=q.querySelector(".form__input_type_title"),b=q.querySelector(".form__input_type_link"),L=q.querySelector(".form__button-save"),E=document.querySelector(".popup-photo__close-button"),C=document.querySelector(".cards"),h=function(e){C.prepend(e)};Array.from(document.querySelectorAll(".popup")).forEach((function(e){e.addEventListener("click",(function(e){!function(e){e.target.classList.contains("popup_opened")&&u(e.target)}(e)}))})),l.addEventListener("click",(function(){_.value=f.textContent,m.value=v.textContent,c(s)})),d.addEventListener("click",(function(){u(s)})),y.addEventListener("click",(function(){q.reset(),L.classList.add("form__button-save_disabled"),L.disabled=!0,c(a)})),S.addEventListener("click",(function(){u(a)})),E.addEventListener("click",(function(){u(e)})),p.addEventListener("submit",(function(e){e.preventDefault(),f.textContent=_.value,v.textContent=m.value,u(s)}));var x,g,j,A=function(e){e.classList.toggle("cards__like-button_active")},B=function(e){e.remove()};function D(o){c(e),t.src=o.link,n.textContent=o.name,t.alt="Фотография ".concat(n.textContent)}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=r(e,A,B,D);h(t)})),q.addEventListener("submit",(function(e){e.preventDefault();var t=r({name:k.value,link:b.value},A,B,D);h(t),u(a)})),x={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__button-save",inactiveButtonClass:"form__button-save_disabled",inputErrorClass:"form__input_type_error",errorClass:"popup__input-error_visible"},g=function(e,t){t.validity.valid?function(e,t){t.classList.remove(x.inputErrorClass);var n=e.querySelector(".".concat(t.id,"-error"));n.textContent="",n.classList.remove(x.errorClass)}(e,t):function(e,t){t.classList.add(x.inputErrorClass);var n=e.querySelector(".".concat(t.id,"-error"));n.textContent=t.validationMessage,n.classList.add(x.errorClass)}(e,t)},j=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(x.inactiveButtonClass),t.disabled=!1):(t.classList.add(x.inactiveButtonClass),t.disabled=!0)},Array.from(document.querySelectorAll(x.formSelector)).forEach((function(e){!function(e){var t=Array.from(e.querySelectorAll(x.inputSelector)),n=e.querySelector(x.submitButtonSelector);j(t,n),t.forEach((function(o){o.addEventListener("input",(function(){g(e,o),j(t,n)}))}))}(e)}))})();